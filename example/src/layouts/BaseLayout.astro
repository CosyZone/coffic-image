---
import { type ISidebarItem, AppLayout } from "@coffic/cosy-ui";
import Favicon from "@/assets/favicon.png";
import { configApp } from "@/config/config.app";
import { configProducts } from "@/config/config.products";
import * as astroI18n from "astro:i18n";
import "@/styles/global.css";

interface Props {
	title: string;
	showTOC?: boolean;
	showSidebar?: boolean;
	sidebarItems?: ISidebarItem | null;
	isArticle?: boolean;
	pt?: string;
	mainLayout?: "row" | "column";
}

const {
	title,
	showTOC = true,
	showSidebar = true,
	sidebarItems = null,
	isArticle = true,
	pt = "4xl",
	mainLayout = "row",
} = Astro.props;
const currentLocale = Astro.currentLocale;
---

<AppLayout
  metaConfig={{
    title: title,
    description: configApp.getSiteDescription(currentLocale || 'zh-cn'),
    keywords: configApp.getSiteKeywords(currentLocale || 'zh-cn'),
    author: 'CofficLab',
    robots: 'index, follow',
    favicon: Favicon,
  }}
  footerConfig={{
    siteName: configApp.getSiteName(currentLocale || 'zh-cn'),
    homeLink: configApp.homeLink,
    slogan: configApp.getSlogan(currentLocale || 'zh-cn'),
    company: 'CofficLab',
    inspirationalSlogan:
      currentLocale === 'zh-cn'
        ? '构建美好的用户界面'
        : 'Build a beautiful user interface',
    socialLinks: ['https://github.com/cosyzone/cosy-ui'],
    products: configProducts.products,
  }}
  headerConfig={{
    logoHref: configApp.homeLink,
    navItems: configApp.getNavItems(currentLocale || 'zh-cn'),
    navPosition: 'start',
    showThemeSwitcher: true,
    astroI18n: astroI18n,
  }}
  sidebarConfig={{
    sidebarItems: sidebarItems ? [sidebarItems] : [],
    debug: false,
  }}
  mainContentConfig={{
    pt: pt,
    py: 'none',
    isArticle: isArticle,
    layout: mainLayout,
    size: isArticle ? 'full' : 'lg',
    showTableOfContents: showTOC,
  }}
  showHeader={true}
  showFooter={true}
  showSidebar={showSidebar}
  loadingDelay={500}>
  <slot />
</AppLayout>
